<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Krishi DSS Dashboard - Crop Recommendations and Agricultural Insights">
    <title>Dashboard | Krishi Mitra</title>
    <style>
        /* CRITICAL: Hide everything, show only loader */
        html { background: #4a7c2c !important; }
        body { margin: 0; padding: 0; background: #4a7c2c !important; overflow: hidden; }
        #app { display: none; }
        body.ready #app { display: block; }
        body.ready { overflow: auto; background: #f5f7f5 !important; }
        body.ready #pageLoader { display: none; }
        
        #pageLoader {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: #4a7c2c;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 999999;
        }
        .loader-dots { display: flex; gap: 10px; }
        .loader-dot {
            width: 14px; height: 14px;
            background: white;
            border-radius: 50%;
            animation: bounce 0.5s ease-in-out infinite alternate;
        }
        .loader-dot:nth-child(2) { animation-delay: 0.15s; }
        .loader-dot:nth-child(3) { animation-delay: 0.3s; }
        @keyframes bounce { to { transform: translateY(-12px); opacity: 0.7; } }
        .loader-text { margin-top: 24px; color: white; font-family: Arial, sans-serif; font-size: 1.4rem; font-weight: 700; }
        .loader-subtext { color: rgba(255,255,255,0.8); font-family: Arial, sans-serif; font-size: 0.9rem; margin-top: 8px; }
    </style>
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/dashboard.css">
</head>
<body class="dashboard-page">
    <!-- Loader -->
    <div id="pageLoader">
        <div class="loader-dots">
            <div class="loader-dot"></div>
            <div class="loader-dot"></div>
            <div class="loader-dot"></div>
        </div>
        <div class="loader-text">üåæ Krishi Mitra</div>
        <div class="loader-subtext">Loading...</div>
    </div>
    
    <!-- ALL CONTENT WRAPPED - Hidden until ready -->
    <div id="app">

    <!-- Header -->
    <header class="main-header">
        <div class="header-content">
            <div class="header-left">
                <button class="menu-toggle" id="menuToggle" aria-label="Toggle menu">
                    <span></span>
                    <span></span>
                    <span></span>
                </button>
                <div class="logo-small">
                    <svg width="36" height="36" viewBox="0 0 24 24" fill="none">
                        <path d="M12 2C12 2 8 6 8 10C8 12.21 9.79 14 12 14C14.21 14 16 12.21 16 10C16 6 12 2 12 2Z" fill="#4a7c2c"/>
                        <path d="M12 14V22" stroke="#2d5016" stroke-width="2"/>
                    </svg>
                    <span data-i18n="app_name">Krishi Mitra</span>
                </div>
            </div>
            <div class="header-right">
                <div class="user-menu">
                    <button class="user-btn" id="userBtn">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                            <circle cx="12" cy="7" r="4"></circle>
                        </svg>
                        <span id="userName">User</span>
                    </button>
                    <div class="user-dropdown hidden" id="userDropdown">
                        <button id="logoutBtn">Logout</button>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Sidebar Navigation -->
    <aside class="sidebar" id="sidebar">
        <nav class="sidebar-nav">
            <a href="#overview" class="nav-item active" data-page="overview">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <rect x="3" y="3" width="7" height="7"></rect>
                    <rect x="14" y="3" width="7" height="7"></rect>
                    <rect x="14" y="14" width="7" height="7"></rect>
                    <rect x="3" y="14" width="7" height="7"></rect>
                </svg>
                <span data-i18n="nav_overview">Overview</span>
            </a>
            <a href="#crop-comparison" class="nav-item" data-page="crop-comparison">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <line x1="18" y1="20" x2="18" y2="10"></line>
                    <line x1="12" y1="20" x2="12" y2="4"></line>
                    <line x1="6" y1="20" x2="6" y2="14"></line>
                </svg>
                <span data-i18n="nav_crop_comparison">Crop Comparison</span>
            </a>
            
            <!-- Marketplace Navigation -->
            <div class="nav-divider">
                <span data-i18n="marketplace_nav">Marketplace</span>
            </div>
            <a href="#sell-produce" class="nav-item" data-page="sell-produce">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M12 2v6m0 0l3-3m-3 3l-3-3"/>
                    <rect x="3" y="8" width="18" height="12" rx="2"/>
                    <path d="M8 12h8M8 16h5"/>
                </svg>
                <span data-i18n="nav_sell_produce">Sell Produce</span>
            </a>
            <a href="#buy-produce" class="nav-item" data-page="buy-produce">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z"></path>
                    <line x1="3" y1="6" x2="21" y2="6"></line>
                    <path d="M16 10a4 4 0 0 1-8 0"></path>
                </svg>
                <span data-i18n="nav_buy_produce">Buy from Farmers</span>
            </a>
            <a href="#corporate" class="nav-item" data-page="corporate">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <rect x="2" y="7" width="20" height="14" rx="2" ry="2"></rect>
                    <path d="M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"></path>
                </svg>
                <span data-i18n="nav_corporate">Corporate Sales</span>
            </a>
        </nav>
    </aside>

    <!-- Main Content -->
    <main class="main-content" id="mainContent">
        <!-- Overview Section -->
        <section class="content-section active" id="overview-section">
            <div class="section-header">
                <h2 data-i18n="overview_title">Dashboard Overview</h2>
                <p data-i18n="overview_subtitle">Quick insights into your farm's potential</p>
            </div>

            <!-- Location Selector Card -->
            <div class="produce-card location-selector-card">
                <div class="produce-badge premium">üåæ Smart Farming</div>
                <div class="produce-header">
                    <div class="crop-image-box location-icon-box">
                        <img loading="lazy" src="images/Wheat.jpg" alt="Farm Location">
                    </div>
                    <div class="crop-details">
                        <h4 data-i18n="select_location">Select Your Location</h4>
                        <span class="variety-tag">Get personalized crop recommendations</span>
                    </div>
                </div>
                <div id="locationForm" class="location-form-new">
                    <div class="form-grid">
                        <div class="form-group-new">
                            <label data-i18n="state_label">State</label>
                            <select id="stateSelect" class="select-modern">
                                <option value="">Select State</option>
                                <option value="1">Jammu and Kashmir</option>
                                <option value="2">Himachal Pradesh</option>
                                <option value="3">Punjab</option>
                                <option value="4">Chandigarh</option>
                                <option value="5">Uttarakhand</option>
                                <option value="6">Haryana</option>
                                <option value="7">Delhi</option>
                                <option value="8">Rajasthan</option>
                                <option value="9">Uttar Pradesh</option>
                                <option value="10">Bihar</option>
                                <option value="11">Sikkim</option>
                                <option value="12">Arunachal Pradesh</option>
                                <option value="13">Nagaland</option>
                                <option value="14">Manipur</option>
                                <option value="15">Mizoram</option>
                                <option value="16">Tripura</option>
                                <option value="17">Meghalaya</option>
                                <option value="18">Assam</option>
                                <option value="19">West Bengal</option>
                                <option value="20">Jharkhand</option>
                                <option value="21">Odisha</option>
                                <option value="22">Chhattisgarh</option>
                                <option value="23">Madhya Pradesh</option>
                                <option value="24">Gujarat</option>
                                <option value="27">Maharashtra</option>
                                <option value="28">Andhra Pradesh</option>
                                <option value="29">Karnataka</option>
                                <option value="30">Goa</option>
                                <option value="32">Kerala</option>
                                <option value="33">Tamil Nadu</option>
                                <option value="34">Puducherry</option>
                                <option value="36">Telangana</option>
                                <option value="37">Ladakh</option>
                            </select>
                        </div>
                        <div class="form-group-new">
                            <label data-i18n="district_label">District</label>
                            <select id="districtSelect" class="select-modern" disabled>
                                <option value="" data-i18n="select_district">Select District</option>
                            </select>
                        </div>
                        <div class="form-group-new">
                            <label data-i18n="season_label">Season</label>
                            <select id="seasonSelect" class="select-modern">
                                <option value="1" data-i18n="season_kharif">Kharif (Jun-Oct)</option>
                                <option value="2" data-i18n="season_rabi">Rabi (Nov-Apr)</option>
                                <option value="3" data-i18n="season_zaid">Zaid (Mar-Jun)</option>
                            </select>
                        </div>
                    </div>
                    <button type="button" id="getRecommendationsBtn" class="btn btn-primary btn-block" onclick="handleGetRecommendations()">
                        <span data-i18n="get_recommendations">üîç Get Recommendations</span>
                    </button>
                </div>
            </div>

            <!-- Stats Cards Grid -->
            <div class="overview-stats-grid">
                <div class="overview-stat-card">
                    <div class="stat-image-box">
                        <img loading="lazy" src="images/rice.jpg" alt="Crops">
                    </div>
                    <div class="stat-info">
                        <span class="stat-label" data-i18n="stat_recommended">Recommended Crops</span>
                        <span class="stat-value-large" id="statCrops">-</span>
                    </div>
                    <div class="stat-indicator positive">
                        <span>Based on your location</span>
                    </div>
                </div>

                <div class="overview-stat-card">
                    <div class="stat-image-box weather-box">
                        <img loading="lazy" src="images/Wheat.jpg" alt="Weather">
                    </div>
                    <div class="stat-info">
                        <span class="stat-label" data-i18n="stat_weather">Weather Status</span>
                        <span class="stat-value-large" id="statWeather">-</span>
                    </div>
                    <div class="stat-indicator">
                        <span>Current conditions</span>
                    </div>
                </div>

                <div class="overview-stat-card">
                    <div class="stat-image-box profit-box">
                        <img loading="lazy" src="images/Mango.jpg" alt="Profit">
                    </div>
                    <div class="stat-info">
                        <span class="stat-label" data-i18n="stat_profit">Avg. Profit Increase</span>
                        <span class="stat-value-large" id="statProfit">-</span>
                    </div>
                    <div class="stat-indicator positive">
                        <span>Compared to traditional farming</span>
                    </div>
                </div>

                <div class="overview-stat-card">
                    <div class="stat-image-box duration-box">
                        <img loading="lazy" src="images/Cotton.jpg" alt="Duration">
                    </div>
                    <div class="stat-info">
                        <span class="stat-label" data-i18n="stat_duration">Avg. Crop Duration</span>
                        <span class="stat-value-large" id="statDuration">-</span>
                    </div>
                    <div class="stat-indicator">
                        <span>Seed to harvest</span>
                    </div>
                </div>
            </div>

            <!-- Quick Actions Grid -->
            <div class="quick-actions-grid">
                <div class="quick-action-card" data-action="crop-comparison">
                    <div class="action-image-box">
                        <img loading="lazy" src="images/Tomato.jpg" alt="Compare Crops">
                    </div>
                    <div class="action-content">
                        <h4>Analyze & Compare Crops</h4>
                        <p>Compare yield, profit, and market demand for different crops</p>
                        <button class="btn btn-primary btn-sm">Start Analysis ‚Üí</button>
                    </div>
                </div>

                <div class="quick-action-card" data-action="sell-produce">
                    <div class="action-image-box">
                        <img loading="lazy" src="images/Potato.jpg" alt="Sell Produce">
                    </div>
                    <div class="action-content">
                        <h4>Sell Your Produce</h4>
                        <p>List your harvest and connect with buyers directly</p>
                        <button class="btn btn-primary btn-sm">List Produce ‚Üí</button>
                    </div>
                </div>

                <div class="quick-action-card" data-action="buy-produce">
                    <div class="action-image-box">
                        <img loading="lazy" src="images/Onion.jpg" alt="Buy Produce">
                    </div>
                    <div class="action-content">
                        <h4>Buy from Farmers</h4>
                        <p>Browse fresh produce directly from cultivators</p>
                        <button class="btn btn-primary btn-sm">Browse Market ‚Üí</button>
                    </div>
                </div>

                <div class="quick-action-card" data-action="corporate">
                    <div class="action-image-box">
                        <img loading="lazy" src="images/Chana.jpg" alt="Corporate Sales">
                    </div>
                    <div class="action-content">
                        <h4>Corporate Contracts</h4>
                        <p>Explore bulk buying opportunities with corporates</p>
                        <button class="btn btn-primary btn-sm">View Tenders ‚Üí</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Crop Comparison Section -->
        <section class="content-section" id="crop-comparison-section">
            <div class="section-header">
                <h2 data-i18n="comparison_title">Crop Comparison & Analysis</h2>
                <p data-i18n="comparison_subtitle">Compare potential profits and resources for your region</p>
            </div>

            <div class="card" style="margin-bottom: 24px;">
                <h3 style="color: #2d5016; margin-bottom: 16px;">Select Your Location</h3>
                <div class="form-row" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 16px; margin-bottom: 20px;">
                    <div class="form-group">
                        <label for="comparisonStateSelect">State</label>
                        <select id="comparisonStateSelect" class="form-control" onchange="cropCharts.onStateChange(this.value)">
                            <option value="">-- Select State --</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="comparisonDistrictSelect">District</label>
                        <select id="comparisonDistrictSelect" class="form-control" onchange="cropCharts.onDistrictChange(this.value)">
                            <option value="">-- Select District --</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="comparisonSeasonSelect">Season</label>
                        <select id="comparisonSeasonSelect" class="form-control" onchange="cropCharts.onSeasonChange(this.value)">
                            <option value="">-- Select Season --</option>
                            <option value="1">Kharif (June-October)</option>
                            <option value="2">Rabi (November-April)</option>
                            <option value="3">Zaid (March-June)</option>
                        </select>
                    </div>
                </div>
                
                <div class="comparison-selector">
                    <h3 style="color: #2d5016; margin-bottom: 12px;">Select Crops to Compare (Max 5)</h3>
                    <p style="color: #757575; font-size: 0.85rem; margin-bottom: 16px;">Crops shown are specific to your selected state, district and season</p>
                    <div class="crop-selector-grid" id="cropSelectorGrid" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(180px, 1fr)); gap: 10px;">
                        <p style="color: #9e9e9e; grid-column: 1/-1; text-align: center; padding: 20px;">Please select state and season to see available crops</p>
                    </div>
                </div>
            </div>

            <div id="comparisonResults" class="comparison-results hidden">
                <!-- Comparison charts and data will be populated here -->
            </div>
        </section>

        <!-- ============================================
             SELL PRODUCE SECTION (Farmer Portal)
             ============================================ -->
        <section class="content-section" id="sell-produce-section">
            <div class="section-header">
                <h2 data-i18n="sell_produce_title">Kisan Produce Listing Portal</h2>
                <p data-i18n="sell_produce_subtitle">List your harvest directly ‚Ä¢ Set your own Mandi rates ‚Ä¢ Connect with verified buyers</p>
            </div>

            <!-- Farmer Action Bar -->
            <div class="marketplace-action-bar">
                <button class="btn btn-primary" id="listProduceBtn">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="12" y1="5" x2="12" y2="19"></line>
                        <line x1="5" y1="12" x2="19" y2="12"></line>
                    </svg>
                    <span data-i18n="list_produce">List New Produce</span>
                </button>
                <div class="filter-group">
                    <select class="form-control" id="cropCategoryFilter">
                        <option value="">All Crop Categories</option>
                        <option value="cereals">Cereals & Millets</option>
                        <option value="pulses">Pulses & Legumes</option>
                        <option value="oilseeds">Oilseeds</option>
                        <option value="vegetables">Vegetables</option>
                        <option value="fruits">Fruits</option>
                        <option value="spices">Spices & Condiments</option>
                    </select>
                    <select class="form-control" id="harvestSeasonFilter">
                        <option value="">Harvest Season</option>
                        <option value="kharif">Kharif (Monsoon)</option>
                        <option value="rabi">Rabi (Winter)</option>
                        <option value="zaid">Zaid (Summer)</option>
                    </select>
                </div>
            </div>

            <!-- Farmer Listings Grid -->
            <div class="produce-listings-grid">
                <!-- Listing Card 1 -->
                <div class="produce-card">
                    <div class="produce-badge premium">Premium Quality</div>
                    <div class="produce-header">
                        <div class="crop-image-box">
                            <img loading="lazy" src="images/Wheat.jpg" alt="Wheat">
                        </div>
                        <div class="crop-details">
                            <h4>Sharbati Wheat (HD-3226)</h4>
                            <span class="variety-tag">Certified Seeds ‚Ä¢ Grade A</span>
                        </div>
                    </div>
                    <div class="produce-info">
                        <div class="info-row">
                            <span class="label">Available Quantity:</span>
                            <span class="value">85 Quintals</span>
                        </div>
                        <div class="info-row">
                            <span class="label">Moisture Content:</span>
                            <span class="value">12.5%</span>
                        </div>
                        <div class="info-row">
                            <span class="label">Harvest Date:</span>
                            <span class="value">January 2026</span>
                        </div>
                        <div class="info-row">
                            <span class="label">Collection Point:</span>
                            <span class="value">Karnal, Haryana</span>
                        </div>
                    </div>
                    <div class="pricing-box">
                        <div class="farmer-price-row">
                            <span class="price-label">Farmer's Asking Price</span>
                            <span class="price-amount">‚Çπ2,450/Qtl</span>
                        </div>
                        <div class="msp-row">
                            <span>MSP: ‚Çπ2,275/Qtl</span>
                            <span class="msp-diff positive">+7.7% Above MSP</span>
                        </div>
                    </div>
                    <div class="seller-info">
                        <div class="seller-avatar">RS</div>
                        <div class="seller-details">
                            <span class="seller-name">Rajendra Singh</span>
                            <span class="seller-rating">‚òÖ 4.8 (42 transactions)</span>
                        </div>
                    </div>
                    <button class="btn btn-outline-primary btn-block">Contact Cultivator</button>
                </div>

                <!-- Listing Card 2 -->
                <div class="produce-card">
                    <div class="produce-badge organic">Organic Certified</div>
                    <div class="produce-header">
                        <div class="crop-image-box">
                            <img loading="lazy" src="images/rice.jpg" alt="Basmati Rice">
                        </div>
                        <div class="crop-details">
                            <h4>Basmati Paddy (Pusa-1121)</h4>
                            <span class="variety-tag">NPOP Certified ‚Ä¢ Export Grade</span>
                        </div>
                    </div>
                    <div class="produce-info">
                        <div class="info-row">
                            <span class="label">Available Quantity:</span>
                            <span class="value">120 Quintals</span>
                        </div>
                        <div class="info-row">
                            <span class="label">Grain Length:</span>
                            <span class="value">8.4mm (Extra Long)</span>
                        </div>
                        <div class="info-row">
                            <span class="label">Harvest Date:</span>
                            <span class="value">December 2025</span>
                        </div>
                        <div class="info-row">
                            <span class="label">Collection Point:</span>
                            <span class="value">Dehradun, Uttarakhand</span>
                        </div>
                    </div>
                    <div class="pricing-box">
                        <div class="farmer-price-row">
                            <span class="price-label">Farmer's Asking Price</span>
                            <span class="price-amount">‚Çπ4,850/Qtl</span>
                        </div>
                        <div class="msp-row">
                            <span>MSP: ‚Çπ2,320/Qtl</span>
                            <span class="msp-diff positive">Premium Organic</span>
                        </div>
                    </div>
                    <div class="seller-info">
                        <div class="seller-avatar">MK</div>
                        <div class="seller-details">
                            <span class="seller-name">Mahesh Kumar</span>
                            <span class="seller-rating">‚òÖ 4.9 (67 transactions)</span>
                        </div>
                    </div>
                    <button class="btn btn-outline-primary btn-block">Contact Cultivator</button>
                </div>

                <!-- Listing Card 3 -->
                <div class="produce-card">
                    <div class="produce-header">
                        <div class="crop-image-box">
                            <img loading="lazy" src="images/masoor.jpg" alt="Masoor Dal">
                        </div>
                        <div class="crop-details">
                            <h4>Masoor Dal (Lens culinaris)</h4>
                            <span class="variety-tag">Whole Red Lentils ‚Ä¢ FAQ</span>
                        </div>
                    </div>
                    <div class="produce-info">
                        <div class="info-row">
                            <span class="label">Available Quantity:</span>
                            <span class="value">45 Quintals</span>
                        </div>
                        <div class="info-row">
                            <span class="label">Purity Level:</span>
                            <span class="value">98.5%</span>
                        </div>
                        <div class="info-row">
                            <span class="label">Harvest Date:</span>
                            <span class="value">January 2026</span>
                        </div>
                        <div class="info-row">
                            <span class="label">Collection Point:</span>
                            <span class="value">Indore, MP</span>
                        </div>
                    </div>
                    <div class="pricing-box">
                        <div class="farmer-price-row">
                            <span class="price-label">Farmer's Asking Price</span>
                            <span class="price-amount">‚Çπ6,200/Qtl</span>
                        </div>
                        <div class="msp-row">
                            <span>MSP: ‚Çπ6,425/Qtl</span>
                            <span class="msp-diff">Negotiable</span>
                        </div>
                    </div>
                    <div class="seller-info">
                        <div class="seller-avatar">SP</div>
                        <div class="seller-details">
                            <span class="seller-name">Sunita Patel</span>
                            <span class="seller-rating">‚òÖ 4.6 (28 transactions)</span>
                        </div>
                    </div>
                    <button class="btn btn-outline-primary btn-block">Contact Cultivator</button>
                </div>

                <!-- Listing Card 4 -->
                <div class="produce-card">
                    <div class="produce-badge fresh">Fresh Harvest</div>
                    <div class="produce-header">
                        <div class="crop-image-box">
                            <img loading="lazy" src="images/Tomato.jpg" alt="Tomatoes">
                        </div>
                        <div class="crop-details">
                            <h4>Desi Tomatoes (Hybrid-7711)</h4>
                            <span class="variety-tag">Farm Fresh ‚Ä¢ Polyhouse Grown</span>
                        </div>
                    </div>
                    <div class="produce-info">
                        <div class="info-row">
                            <span class="label">Available Quantity:</span>
                            <span class="value">25 Quintals/Week</span>
                        </div>
                        <div class="info-row">
                            <span class="label">Size Grade:</span>
                            <span class="value">Large (80-100g)</span>
                        </div>
                        <div class="info-row">
                            <span class="label">Availability:</span>
                            <span class="value">Continuous Supply</span>
                        </div>
                        <div class="info-row">
                            <span class="label">Collection Point:</span>
                            <span class="value">Nashik, Maharashtra</span>
                        </div>
                    </div>
                    <div class="pricing-box">
                        <div class="farmer-price-row">
                            <span class="price-label">Farmer's Asking Price</span>
                            <span class="price-amount">‚Çπ2,800/Qtl</span>
                        </div>
                        <div class="msp-row">
                            <span>Market Rate: ‚Çπ3,200/Qtl</span>
                            <span class="msp-diff positive">Direct Farm Price</span>
                        </div>
                    </div>
                    <div class="seller-info">
                        <div class="seller-avatar">AJ</div>
                        <div class="seller-details">
                            <span class="seller-name">Anil Jadhav</span>
                            <span class="seller-rating">‚òÖ 4.7 (53 transactions)</span>
                        </div>
                    </div>
                    <button class="btn btn-outline-primary btn-block">Contact Cultivator</button>
                </div>

                <!-- Listing Card 5 -->
                <div class="produce-card">
                    <div class="produce-header">
                        <div class="crop-image-box">
                            <img loading="lazy" src="images/Groundnut.jpg" alt="Groundnut">
                        </div>
                        <div class="crop-details">
                            <h4>Groundnut (TG-37A)</h4>
                            <span class="variety-tag">Bold Kernel ‚Ä¢ HPS Grade</span>
                        </div>
                    </div>
                    <div class="produce-info">
                        <div class="info-row">
                            <span class="label">Available Quantity:</span>
                            <span class="value">60 Quintals</span>
                        </div>
                        <div class="info-row">
                            <span class="label">Oil Content:</span>
                            <span class="value">48-50%</span>
                        </div>
                        <div class="info-row">
                            <span class="label">Harvest Date:</span>
                            <span class="value">December 2025</span>
                        </div>
                        <div class="info-row">
                            <span class="label">Collection Point:</span>
                            <span class="value">Junagadh, Gujarat</span>
                        </div>
                    </div>
                    <div class="pricing-box">
                        <div class="farmer-price-row">
                            <span class="price-label">Farmer's Asking Price</span>
                            <span class="price-amount">‚Çπ5,950/Qtl</span>
                        </div>
                        <div class="msp-row">
                            <span>MSP: ‚Çπ6,377/Qtl</span>
                            <span class="msp-diff">Quick Sale</span>
                        </div>
                    </div>
                    <div class="seller-info">
                        <div class="seller-avatar">BM</div>
                        <div class="seller-details">
                            <span class="seller-name">Bhavesh Mehta</span>
                            <span class="seller-rating">‚òÖ 4.5 (19 transactions)</span>
                        </div>
                    </div>
                    <button class="btn btn-outline-primary btn-block">Contact Cultivator</button>
                </div>

                <!-- Listing Card 6 -->
                <div class="produce-card">
                    <div class="produce-badge premium">A1 Quality</div>
                    <div class="produce-header">
                        <div class="crop-image-box">
                            <img loading="lazy" src="images/Turmeric.jpg" alt="Turmeric">
                        </div>
                        <div class="crop-details">
                            <h4>Turmeric (Curcuma longa)</h4>
                            <span class="variety-tag">Erode Finger ‚Ä¢ High Curcumin</span>
                        </div>
                    </div>
                    <div class="produce-info">
                        <div class="info-row">
                            <span class="label">Available Quantity:</span>
                            <span class="value">35 Quintals</span>
                        </div>
                        <div class="info-row">
                            <span class="label">Curcumin Content:</span>
                            <span class="value">5.2%</span>
                        </div>
                        <div class="info-row">
                            <span class="label">Harvest Date:</span>
                            <span class="value">December 2025</span>
                        </div>
                        <div class="info-row">
                            <span class="label">Collection Point:</span>
                            <span class="value">Erode, Tamil Nadu</span>
                        </div>
                    </div>
                    <div class="pricing-box">
                        <div class="farmer-price-row">
                            <span class="price-label">Farmer's Asking Price</span>
                            <span class="price-amount">‚Çπ12,500/Qtl</span>
                        </div>
                        <div class="msp-row">
                            <span>Market Rate: ‚Çπ14,000/Qtl</span>
                            <span class="msp-diff positive">Direct Sourcing</span>
                        </div>
                    </div>
                    <div class="seller-info">
                        <div class="seller-avatar">KR</div>
                        <div class="seller-details">
                            <span class="seller-name">K. Ramasamy</span>
                            <span class="seller-rating">‚òÖ 4.9 (78 transactions)</span>
                        </div>
                    </div>
                    <button class="btn btn-outline-primary btn-block">Contact Cultivator</button>
                </div>

                <!-- Listing Card 7 -->
                <div class="produce-card">
                    <div class="produce-badge organic">Organic</div>
                    <div class="produce-header">
                        <div class="crop-image-box">
                            <img loading="lazy" src="images/sugarcane.jpg" alt="Sugarcane">
                        </div>
                        <div class="crop-details">
                            <h4>Sugarcane (Co-0238)</h4>
                            <span class="variety-tag">High Sucrose ‚Ä¢ Early Maturing</span>
                        </div>
                    </div>
                    <div class="produce-info">
                        <div class="info-row">
                            <span class="label">Available Quantity:</span>
                            <span class="value">500 Tonnes</span>
                        </div>
                        <div class="info-row">
                            <span class="label">Sucrose Content:</span>
                            <span class="value">18.5%</span>
                        </div>
                        <div class="info-row">
                            <span class="label">Harvest Date:</span>
                            <span class="value">January 2026</span>
                        </div>
                        <div class="info-row">
                            <span class="label">Collection Point:</span>
                            <span class="value">Muzaffarnagar, UP</span>
                        </div>
                    </div>
                    <div class="pricing-box">
                        <div class="farmer-price-row">
                            <span class="price-label">Farmer's Asking Price</span>
                            <span class="price-amount">‚Çπ350/Qtl</span>
                        </div>
                        <div class="msp-row">
                            <span>FRP: ‚Çπ315/Qtl</span>
                            <span class="msp-diff positive">Premium Quality</span>
                        </div>
                    </div>
                    <div class="seller-info">
                        <div class="seller-avatar">RS</div>
                        <div class="seller-details">
                            <span class="seller-name">Ramesh Singh</span>
                            <span class="seller-rating">‚òÖ 4.7 (62 transactions)</span>
                        </div>
                    </div>
                    <button class="btn btn-outline-primary btn-block">Contact Cultivator</button>
                </div>

                <!-- Listing Card 8 -->
                <div class="produce-card">
                    <div class="produce-header">
                        <div class="crop-image-box">
                            <img loading="lazy" src="images/Cotton.jpg" alt="Cotton">
                        </div>
                        <div class="crop-details">
                            <h4>Cotton (Bt-Hybrid)</h4>
                            <span class="variety-tag">Long Staple ‚Ä¢ Ginned</span>
                        </div>
                    </div>
                    <div class="produce-info">
                        <div class="info-row">
                            <span class="label">Available Quantity:</span>
                            <span class="value">80 Quintals</span>
                        </div>
                        <div class="info-row">
                            <span class="label">Staple Length:</span>
                            <span class="value">28-30mm</span>
                        </div>
                        <div class="info-row">
                            <span class="label">Harvest Date:</span>
                            <span class="value">December 2025</span>
                        </div>
                        <div class="info-row">
                            <span class="label">Collection Point:</span>
                            <span class="value">Nagpur, Maharashtra</span>
                        </div>
                    </div>
                    <div class="pricing-box">
                        <div class="farmer-price-row">
                            <span class="price-label">Farmer's Asking Price</span>
                            <span class="price-amount">‚Çπ7,200/Qtl</span>
                        </div>
                        <div class="msp-row">
                            <span>MSP: ‚Çπ7,020/Qtl</span>
                            <span class="msp-diff positive">Above MSP</span>
                        </div>
                    </div>
                    <div class="seller-info">
                        <div class="seller-avatar">VD</div>
                        <div class="seller-details">
                            <span class="seller-name">Vijay Deshmukh</span>
                            <span class="seller-rating">‚òÖ 4.6 (45 transactions)</span>
                        </div>
                    </div>
                    <button class="btn btn-outline-primary btn-block">Contact Cultivator</button>
                </div>

                <!-- Listing Card 9 -->
                <div class="produce-card">
                    <div class="produce-badge fresh">Just Harvested</div>
                    <div class="produce-header">
                        <div class="crop-image-box">
                            <img loading="lazy" src="images/Potato.jpg" alt="Potatoes">
                        </div>
                        <div class="crop-details">
                            <h4>Potato (Kufri Jyoti)</h4>
                            <span class="variety-tag">Table Purpose ‚Ä¢ Cold Storage</span>
                        </div>
                    </div>
                    <div class="produce-info">
                        <div class="info-row">
                            <span class="label">Available Quantity:</span>
                            <span class="value">200 Quintals</span>
                        </div>
                        <div class="info-row">
                            <span class="label">Size Grade:</span>
                            <span class="value">Large (75-100g)</span>
                        </div>
                        <div class="info-row">
                            <span class="label">Harvest Date:</span>
                            <span class="value">December 2025</span>
                        </div>
                        <div class="info-row">
                            <span class="label">Collection Point:</span>
                            <span class="value">Agra, Uttar Pradesh</span>
                        </div>
                    </div>
                    <div class="pricing-box">
                        <div class="farmer-price-row">
                            <span class="price-label">Farmer's Asking Price</span>
                            <span class="price-amount">‚Çπ1,200/Qtl</span>
                        </div>
                        <div class="msp-row">
                            <span>Market Rate: ‚Çπ1,500/Qtl</span>
                            <span class="msp-diff positive">Bulk Discount</span>
                        </div>
                    </div>
                    <div class="seller-info">
                        <div class="seller-avatar">AY</div>
                        <div class="seller-details">
                            <span class="seller-name">Ashok Yadav</span>
                            <span class="seller-rating">‚òÖ 4.8 (91 transactions)</span>
                        </div>
                    </div>
                    <button class="btn btn-outline-primary btn-block">Contact Cultivator</button>
                </div>

                <!-- Listing Card 10 -->
                <div class="produce-card">
                    <div class="produce-header">
                        <div class="crop-image-box">
                            <img loading="lazy" src="images/mustard.jpg" alt="Mustard">
                        </div>
                        <div class="crop-details">
                            <h4>Mustard (Pusa Bold)</h4>
                            <span class="variety-tag">High Oil Content ‚Ä¢ Bold Seeds</span>
                        </div>
                    </div>
                    <div class="produce-info">
                        <div class="info-row">
                            <span class="label">Available Quantity:</span>
                            <span class="value">55 Quintals</span>
                        </div>
                        <div class="info-row">
                            <span class="label">Oil Content:</span>
                            <span class="value">42%</span>
                        </div>
                        <div class="info-row">
                            <span class="label">Harvest Date:</span>
                            <span class="value">January 2026</span>
                        </div>
                        <div class="info-row">
                            <span class="label">Collection Point:</span>
                            <span class="value">Bharatpur, Rajasthan</span>
                        </div>
                    </div>
                    <div class="pricing-box">
                        <div class="farmer-price-row">
                            <span class="price-label">Farmer's Asking Price</span>
                            <span class="price-amount">‚Çπ5,650/Qtl</span>
                        </div>
                        <div class="msp-row">
                            <span>MSP: ‚Çπ5,650/Qtl</span>
                            <span class="msp-diff">At MSP</span>
                        </div>
                    </div>
                    <div class="seller-info">
                        <div class="seller-avatar">HS</div>
                        <div class="seller-details">
                            <span class="seller-name">Harpal Singh</span>
                            <span class="seller-rating">‚òÖ 4.5 (33 transactions)</span>
                        </div>
                    </div>
                    <button class="btn btn-outline-primary btn-block">Contact Cultivator</button>
                </div>
            </div>
        </section>

        <!-- ============================================
             BUY PRODUCE SECTION (Retailer Portal)
             ============================================ -->
        <section class="content-section" id="buy-produce-section">
            <div class="section-header">
                <h2 data-i18n="buy_produce_title">Retailer Procurement Hub</h2>
                <p data-i18n="buy_produce_subtitle">Source directly from Kisans ‚Ä¢ Zero middlemen ‚Ä¢ Farm-gate prices ‚Ä¢ Quality assured produce</p>
            </div>

            <!-- Search Bar -->
            <div class="marketplace-search-bar">
                <div class="search-input-wrapper">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="11" cy="11" r="8"></circle>
                        <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                    </svg>
                    <input type="text" placeholder="Search by crop name, variety, location, or farmer..." class="form-control search-input">
                </div>
                <button class="btn btn-primary">Find Produce</button>
            </div>

            <!-- Category Chips -->
            <div class="category-chips">
                <button class="chip active">All Categories</button>
                <button class="chip">Cereals</button>
                <button class="chip">Pulses</button>
                <button class="chip">Vegetables</button>
                <button class="chip">Fruits</button>
                <button class="chip">Spices</button>
                <button class="chip">Oilseeds</button>
            </div>

            <!-- Produce Table -->
            <div class="card">
                <div class="table-responsive">
                    <table class="table marketplace-table">
                        <thead>
                            <tr>
                                <th>Commodity</th>
                                <th>Variety & Grade</th>
                                <th>Quantity (Qtl)</th>
                                <th>Farm-Gate Price</th>
                                <th>Location</th>
                                <th>Grower Rating</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><span class="commodity-tag cereals"><img loading="lazy" src="images/Wheat.jpg" alt="Wheat"> Wheat</span></td>
                                <td>HD-3226, Grade-A</td>
                                <td>85</td>
                                <td class="price-cell">‚Çπ2,450/Qtl</td>
                                <td>Karnal, HR</td>
                                <td><span class="rating-badge">‚òÖ 4.8</span></td>
                                <td><button class="btn btn-sm btn-primary">Place Order</button></td>
                            </tr>
                            <tr>
                                <td><span class="commodity-tag cereals"><img loading="lazy" src="images/rice.jpg" alt="Rice"> Basmati Paddy</span></td>
                                <td>Pusa-1121, Export</td>
                                <td>120</td>
                                <td class="price-cell">‚Çπ4,850/Qtl</td>
                                <td>Dehradun, UK</td>
                                <td><span class="rating-badge">‚òÖ 4.9</span></td>
                                <td><button class="btn btn-sm btn-primary">Place Order</button></td>
                            </tr>
                            <tr>
                                <td><span class="commodity-tag pulses"><img loading="lazy" src="images/masoor.jpg" alt="Lentils"> Masoor Dal</span></td>
                                <td>Whole Red, FAQ</td>
                                <td>45</td>
                                <td class="price-cell">‚Çπ6,200/Qtl</td>
                                <td>Indore, MP</td>
                                <td><span class="rating-badge">‚òÖ 4.6</span></td>
                                <td><button class="btn btn-sm btn-primary">Place Order</button></td>
                            </tr>
                            <tr>
                                <td><span class="commodity-tag vegetables"><img loading="lazy" src="images/Tomato.jpg" alt="Tomatoes"> Tomatoes</span></td>
                                <td>Hybrid-7711, Large</td>
                                <td>25/Week</td>
                                <td class="price-cell">‚Çπ2,800/Qtl</td>
                                <td>Nashik, MH</td>
                                <td><span class="rating-badge">‚òÖ 4.7</span></td>
                                <td><button class="btn btn-sm btn-primary">Place Order</button></td>
                            </tr>
                            <tr>
                                <td><span class="commodity-tag oilseeds"><img loading="lazy" src="images/Groundnut.jpg" alt="Groundnut"> Groundnut</span></td>
                                <td>TG-37A, Bold HPS</td>
                                <td>60</td>
                                <td class="price-cell">‚Çπ5,950/Qtl</td>
                                <td>Junagadh, GJ</td>
                                <td><span class="rating-badge">‚òÖ 4.5</span></td>
                                <td><button class="btn btn-sm btn-primary">Place Order</button></td>
                            </tr>
                            <tr>
                                <td><span class="commodity-tag spices"><img loading="lazy" src="images/Turmeric.jpg" alt="Turmeric"> Turmeric</span></td>
                                <td>Erode Finger, 5.2%</td>
                                <td>35</td>
                                <td class="price-cell">‚Çπ12,500/Qtl</td>
                                <td>Erode, TN</td>
                                <td><span class="rating-badge">‚òÖ 4.9</span></td>
                                <td><button class="btn btn-sm btn-primary">Place Order</button></td>
                            </tr>
                            <tr>
                                <td><span class="commodity-tag pulses"><img loading="lazy" src="images/Chana.jpg" alt="Chana"> Chana Dal</span></td>
                                <td>Desi, Super Bold</td>
                                <td>75</td>
                                <td class="price-cell">‚Çπ5,650/Qtl</td>
                                <td>Rajkot, GJ</td>
                                <td><span class="rating-badge">‚òÖ 4.4</span></td>
                                <td><button class="btn btn-sm btn-primary">Place Order</button></td>
                            </tr>
                            <tr>
                                <td><span class="commodity-tag vegetables"><img loading="lazy" src="images/Onion.jpg" alt="Onion"> Onion</span></td>
                                <td>Nashik Red, Large</td>
                                <td>150</td>
                                <td class="price-cell">‚Çπ1,850/Qtl</td>
                                <td>Nashik, MH</td>
                                <td><span class="rating-badge">‚òÖ 4.6</span></td>
                                <td><button class="btn btn-sm btn-primary">Place Order</button></td>
                            </tr>
                            <tr>
                                <td><span class="commodity-tag fruits"><img loading="lazy" src="images/Mango.jpg" alt="Mango"> Alphonso Mango</span></td>
                                <td>Ratnagiri, Premium</td>
                                <td>40</td>
                                <td class="price-cell">‚Çπ8,500/Qtl</td>
                                <td>Ratnagiri, MH</td>
                                <td><span class="rating-badge">‚òÖ 4.8</span></td>
                                <td><button class="btn btn-sm btn-primary">Place Order</button></td>
                            </tr>
                            <tr>
                                <td><span class="commodity-tag cereals"><img loading="lazy" src="images/maize-seeds.jpg" alt="Maize"> Maize</span></td>
                                <td>Yellow Dent, Feed</td>
                                <td>200</td>
                                <td class="price-cell">‚Çπ2,150/Qtl</td>
                                <td>Davangere, KA</td>
                                <td><span class="rating-badge">‚òÖ 4.3</span></td>
                                <td><button class="btn btn-sm btn-primary">Place Order</button></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Benefits Grid -->
            <div class="benefits-grid">
                <div class="benefit-card">
                    <div class="benefit-icon">
                        <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path>
                        </svg>
                    </div>
                    <h4>Quality Assurance</h4>
                    <p>All produce verified for grade, moisture & purity before listing</p>
                </div>
                <div class="benefit-card">
                    <div class="benefit-icon">
                        <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="10"></circle>
                            <polyline points="12 6 12 12 16 14"></polyline>
                        </svg>
                    </div>
                    <h4>Real-Time Availability</h4>
                    <p>Live inventory updates from farm-level storage facilities</p>
                </div>
                <div class="benefit-card">
                    <div class="benefit-icon">
                        <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <rect x="1" y="4" width="22" height="16" rx="2" ry="2"></rect>
                            <line x1="1" y1="10" x2="23" y2="10"></line>
                        </svg>
                    </div>
                    <h4>Secure Payments</h4>
                    <p>Escrow-protected transactions with instant settlement to farmers</p>
                </div>
                <div class="benefit-card">
                    <div class="benefit-icon">
                        <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                            <circle cx="12" cy="12" r="3"></circle>
                        </svg>
                    </div>
                    <h4>Full Traceability</h4>
                    <p>Complete farm-to-fork chain visibility with geo-tagged produce</p>
                </div>
            </div>
        </section>

        <!-- ============================================
             CORPORATE SECTION (Bulk Procurement)
             ============================================ -->
        <section class="content-section" id="corporate-section">
            <div class="section-header">
                <h2 data-i18n="corporate_title">Corporate Procurement Portal</h2>
                <p data-i18n="corporate_subtitle">Direct-from-farm bulk sourcing ‚Ä¢ Contract farming partnerships ‚Ä¢ FPO aggregation ‚Ä¢ Supply chain integration</p>
            </div>

            <!-- Corporate Stats -->
            <div class="corporate-stats-grid">
                <div class="corp-stat-card">
                    <span class="corp-stat-value">450+</span>
                    <span class="corp-stat-label">Registered FPOs</span>
                </div>
                <div class="corp-stat-card">
                    <span class="corp-stat-value">85,000+</span>
                    <span class="corp-stat-label">Aggregated Farmers</span>
                </div>
                <div class="corp-stat-card">
                    <span class="corp-stat-value">28 States</span>
                    <span class="corp-stat-label">Pan-India Coverage</span>
                </div>
                <div class="corp-stat-card">
                    <span class="corp-stat-value">‚Çπ250 Cr+</span>
                    <span class="corp-stat-label">Annual Procurement</span>
                </div>
            </div>

            <!-- Active Tenders -->
            <div class="card">
                <h3 data-i18n="active_tenders">Active Bulk Procurement Tenders</h3>
                <p style="color: var(--text-secondary); margin-bottom: 1.5rem;">Farmers & FPOs can directly bid on corporate requirements</p>
                
                <div class="tenders-grid">
                    <!-- Tender 1 -->
                    <div class="tender-card">
                        <div class="tender-header">
                            <div class="company-badge">ITC</div>
                            <div class="tender-info">
                                <h4>ITC Agri Business</h4>
                                <span class="tender-id">Tender #AGR-2026-0892</span>
                            </div>
                            <span class="tender-status open">Open for Bids</span>
                        </div>
                        <div class="tender-body">
                            <div class="tender-commodity">
                                <span class="label">Commodity Required:</span>
                                <span class="value">Wheat (Sharbati, FAQ Grade)</span>
                            </div>
                            <div class="tender-specs">
                                <div class="spec"><span class="label">Quantity:</span><span class="value">5,000 MT</span></div>
                                <div class="spec"><span class="label">Delivery:</span><span class="value">Jan - Feb 2026</span></div>
                                <div class="spec"><span class="label">Base Price:</span><span class="value">‚Çπ2,350/Qtl</span></div>
                                <div class="spec"><span class="label">Locations:</span><span class="value">Hapur, Khanna, Kota</span></div>
                            </div>
                            <div class="tender-tags">
                                <span class="req-tag">Moisture &lt;14%</span>
                                <span class="req-tag">Foreign Matter &lt;1%</span>
                                <span class="req-tag">Broken &lt;2%</span>
                            </div>
                        </div>
                        <div class="tender-footer">
                            <span class="deadline">Bid Deadline: 10 Jan 2026</span>
                            <button class="btn btn-primary btn-sm">Submit Bid</button>
                        </div>
                    </div>

                    <!-- Tender 2 -->
                    <div class="tender-card">
                        <div class="tender-header">
                            <div class="company-badge">AWL</div>
                            <div class="tender-info">
                                <h4>Adani Wilmar Ltd</h4>
                                <span class="tender-id">Tender #AWL-2026-0456</span>
                            </div>
                            <span class="tender-status open">Open for Bids</span>
                        </div>
                        <div class="tender-body">
                            <div class="tender-commodity">
                                <span class="label">Commodity Required:</span>
                                <span class="value">Soybean (Yellow, Grade-A)</span>
                            </div>
                            <div class="tender-specs">
                                <div class="spec"><span class="label">Quantity:</span><span class="value">10,000 MT</span></div>
                                <div class="spec"><span class="label">Delivery:</span><span class="value">Feb - Mar 2026</span></div>
                                <div class="spec"><span class="label">Base Price:</span><span class="value">‚Çπ4,600/Qtl</span></div>
                                <div class="spec"><span class="label">Locations:</span><span class="value">Indore, Nagpur</span></div>
                            </div>
                            <div class="tender-tags">
                                <span class="req-tag">Oil Content &gt;18%</span>
                                <span class="req-tag">Moisture &lt;12%</span>
                                <span class="req-tag">Damaged &lt;3%</span>
                            </div>
                        </div>
                        <div class="tender-footer">
                            <span class="deadline">Bid Deadline: 15 Jan 2026</span>
                            <button class="btn btn-primary btn-sm">Submit Bid</button>
                        </div>
                    </div>

                    <!-- Tender 3 -->
                    <div class="tender-card">
                        <div class="tender-header">
                            <div class="company-badge">RF</div>
                            <div class="tender-info">
                                <h4>Reliance Fresh</h4>
                                <span class="tender-id">Tender #RF-2026-1023</span>
                            </div>
                            <span class="tender-status urgent">Urgent Requirement</span>
                        </div>
                        <div class="tender-body">
                            <div class="tender-commodity">
                                <span class="label">Commodity Required:</span>
                                <span class="value">Fresh Vegetables (Assorted)</span>
                            </div>
                            <div class="tender-specs">
                                <div class="spec"><span class="label">Quantity:</span><span class="value">500 MT/Month</span></div>
                                <div class="spec"><span class="label">Contract:</span><span class="value">12 Months</span></div>
                                <div class="spec"><span class="label">Payment:</span><span class="value">Weekly Settlement</span></div>
                                <div class="spec"><span class="label">Locations:</span><span class="value">Pan-India DCs</span></div>
                            </div>
                            <div class="tender-tags">
                                <span class="req-tag">Grade-A Only</span>
                                <span class="req-tag">Cold Chain Ready</span>
                                <span class="req-tag">GAP Certified</span>
                            </div>
                        </div>
                        <div class="tender-footer">
                            <span class="deadline">Bid Deadline: 5 Jan 2026</span>
                            <button class="btn btn-primary btn-sm">Submit Bid</button>
                        </div>
                    </div>

                    <!-- Tender 4 -->
                    <div class="tender-card">
                        <div class="tender-header">
                            <div class="company-badge">TCP</div>
                            <div class="tender-info">
                                <h4>Tata Consumer Products</h4>
                                <span class="tender-id">Tender #TCP-2026-0234</span>
                            </div>
                            <span class="tender-status open">Open for Bids</span>
                        </div>
                        <div class="tender-body">
                            <div class="tender-commodity">
                                <span class="label">Commodity Required:</span>
                                <span class="value">Turmeric (Erode/Salem Finger)</span>
                            </div>
                            <div class="tender-specs">
                                <div class="spec"><span class="label">Quantity:</span><span class="value">2,000 MT</span></div>
                                <div class="spec"><span class="label">Delivery:</span><span class="value">Mar - Apr 2026</span></div>
                                <div class="spec"><span class="label">Base Price:</span><span class="value">‚Çπ11,800/Qtl</span></div>
                                <div class="spec"><span class="label">Locations:</span><span class="value">Erode, Sangli</span></div>
                            </div>
                            <div class="tender-tags">
                                <span class="req-tag">Curcumin &gt;4%</span>
                                <span class="req-tag">Polished</span>
                                <span class="req-tag">FSSAI Compliant</span>
                            </div>
                        </div>
                        <div class="tender-footer">
                            <span class="deadline">Bid Deadline: 20 Jan 2026</span>
                            <button class="btn btn-primary btn-sm">Submit Bid</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Contract Farming -->
            <div class="card" style="margin-top: 2rem;">
                <h3>Contract Farming Opportunities</h3>
                <p style="color: var(--text-secondary); margin-bottom: 1.5rem;">Partner with leading agri-businesses for assured buyback at predetermined prices</p>
                
                <div class="contracts-grid">
                    <div class="contract-card">
                        <div class="contract-header">
                            <span class="crop-badge">Potato</span>
                            <span class="contract-type">Buyback Agreement</span>
                        </div>
                        <div class="contract-company">McCain Foods India</div>
                        <div class="contract-details">
                            <p><strong>Variety:</strong> Kennebec, Atlantic</p>
                            <p><strong>Area Required:</strong> 500+ Acres</p>
                            <p><strong>Buyback Price:</strong> ‚Çπ12/Kg (Fixed)</p>
                            <p><strong>Region:</strong> Gujarat, Maharashtra</p>
                        </div>
                        <button class="btn btn-outline-primary btn-block">Apply for Contract</button>
                    </div>

                    <div class="contract-card">
                        <div class="contract-header">
                            <span class="crop-badge">Gherkins</span>
                            <span class="contract-type">Export Contract</span>
                        </div>
                        <div class="contract-company">Global Green Company</div>
                        <div class="contract-details">
                            <p><strong>Variety:</strong> Ajax, Excelsior</p>
                            <p><strong>Area Required:</strong> 200+ Acres</p>
                            <p><strong>Buyback Price:</strong> ‚Çπ18/Kg (Grade-wise)</p>
                            <p><strong>Region:</strong> Karnataka, Tamil Nadu</p>
                        </div>
                        <button class="btn btn-outline-primary btn-block">Apply for Contract</button>
                    </div>

                    <div class="contract-card">
                        <div class="contract-header">
                            <span class="crop-badge">Basmati Rice</span>
                            <span class="contract-type">Premium Buyback</span>
                        </div>
                        <div class="contract-company">KRBL Ltd (India Gate)</div>
                        <div class="contract-details">
                            <p><strong>Variety:</strong> 1121, 1509</p>
                            <p><strong>Area Required:</strong> 1000+ Acres</p>
                            <p><strong>Buyback Price:</strong> MSP + 15%</p>
                            <p><strong>Region:</strong> Punjab, Haryana, UP</p>
                        </div>
                        <button class="btn btn-outline-primary btn-block">Apply for Contract</button>
                    </div>

                    <div class="contract-card">
                        <div class="contract-header">
                            <span class="crop-badge">Organic Pulses</span>
                            <span class="contract-type">Organic Premium</span>
                        </div>
                        <div class="contract-company">Organic India Pvt Ltd</div>
                        <div class="contract-details">
                            <p><strong>Variety:</strong> Moong, Urad, Chana</p>
                            <p><strong>Area Required:</strong> 300+ Acres</p>
                            <p><strong>Buyback Price:</strong> MSP + 25%</p>
                            <p><strong>Region:</strong> MP, Rajasthan</p>
                        </div>
                        <button class="btn btn-outline-primary btn-block">Apply for Contract</button>
                    </div>
                </div>
            </div>

            <!-- FPO CTA -->
            <div class="fpo-cta-card">
                <div class="fpo-content">
                    <h3>Are You an FPO or Farmer Producer Company?</h3>
                    <p>Register your organization to access exclusive bulk procurement opportunities, government schemes, and direct corporate tie-ups. Get premium prices for aggregated produce.</p>
                    <div class="fpo-benefits">
                        <span class="fpo-benefit">‚úì Priority Tender Access</span>
                        <span class="fpo-benefit">‚úì Working Capital Support</span>
                        <span class="fpo-benefit">‚úì Free Quality Testing</span>
                        <span class="fpo-benefit">‚úì Logistics Assistance</span>
                    </div>
                </div>
                <button class="btn btn-primary btn-lg">Register Your FPO</button>
            </div>
        </section>

    </main>

    <!-- Loading Overlay -->
    <div class="loading-overlay hidden" id="loadingOverlay">
        <div class="spinner"></div>
        <p data-i18n="loading">Loading...</p>
    </div>

    <!-- Toast Notifications -->
    <div class="toast-container" id="toastContainer"></div>

    <!-- Scripts - deferred for faster page load -->
    <script defer src="config.js"></script>
    <script defer src="js/api.js"></script>
    <script defer src="js/auth.js"></script>
    <script defer src="js/translations.js"></script>
    <script defer src="js/districts_data.js"></script>
    <script defer src="js/agricultural_data.js"></script>
    <script defer src="js/openai_integration.js"></script>
    <script defer src="js/api_new.js"></script>
    <script defer src="js/dashboard.js"></script>
    <script defer src="js/charts.js"></script>
    
    <!-- Handler for Get Recommendations Button -->
    <script>
    async function handleGetRecommendations() {
        console.log('Get Recommendations clicked');
        
        const stateSelect = document.getElementById('stateSelect');
        const districtSelect = document.getElementById('districtSelect');
        const seasonSelect = document.getElementById('seasonSelect');
        
        const stateCode = parseInt(stateSelect.value);
        const districtCode = parseInt(districtSelect.value);
        const seasonId = parseInt(seasonSelect.value);
        const stateName = stateSelect.options[stateSelect.selectedIndex]?.text || '';
        const districtName = districtSelect.options[districtSelect.selectedIndex]?.text || '';
        
        // Validate
        if (!stateCode || isNaN(stateCode)) {
            alert('Please select a State');
            return;
        }
        if (!districtCode || isNaN(districtCode)) {
            alert('Please select a District');
            return;
        }
        if (!seasonId || isNaN(seasonId)) {
            alert('Please select a Season');
            return;
        }
        
        // Show loading
        showLoadingState(true, 'Analyzing best crops for ' + districtName + ', ' + stateName + '...');
        
        try {
            // Navigate to Crop Comparison section
            document.querySelectorAll('.content-section').forEach(s => s.classList.remove('active'));
            const section = document.getElementById('crop-comparison-section');
            if (section) {
                section.classList.add('active');
            }
            document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
            const navItem = document.querySelector('[data-page="crop-comparison"]');
            if (navItem) navItem.classList.add('active');
            
            // Set the state, district and season in comparison dropdowns
            const compStateSelect = document.getElementById('comparisonStateSelect');
            const compDistrictSelect = document.getElementById('comparisonDistrictSelect');
            const compSeasonSelect = document.getElementById('comparisonSeasonSelect');
            
            if (compStateSelect) compStateSelect.value = stateCode;
            
            // Populate districts in comparison dropdown
            if (compDistrictSelect && typeof DISTRICTS_DATA !== 'undefined') {
                const districts = DISTRICTS_DATA[stateCode] || [];
                let html = '<option value="">-- Select District --</option>';
                districts.forEach(d => {
                    html += `<option value="${d.code}">${d.name}</option>`;
                });
                compDistrictSelect.innerHTML = html;
                compDistrictSelect.value = districtCode;
            }
            
            if (compSeasonSelect) compSeasonSelect.value = seasonId;
            
            // Trigger crop loading and auto-select top 5
            if (typeof cropCharts !== 'undefined') {
                cropCharts.currentState = stateCode;
                cropCharts.currentDistrict = districtCode;
                cropCharts.currentDistrictName = districtName;
                cropCharts.currentSeason = seasonId;
                cropCharts.selectedCrops = [];
                cropCharts.updateCropSelector();
                
                // Auto-select top 5 crops (they are already sorted by suitability)
                setTimeout(() => {
                    const checkboxes = document.querySelectorAll('#cropSelectorGrid input[type="checkbox"]');
                    const maxSelect = Math.min(5, checkboxes.length);
                    
                    for (let i = 0; i < maxSelect; i++) {
                        if (checkboxes[i]) {
                            checkboxes[i].checked = true;
                            cropCharts.selectedCrops.push(i);
                        }
                    }
                    
                    // Update comparison charts
                    cropCharts.updateComparison();
                    
                    // Scroll to results
                    const resultsContainer = document.getElementById('comparisonResults');
                    if (resultsContainer && !resultsContainer.classList.contains('hidden')) {
                        resultsContainer.scrollIntoView({ behavior: 'smooth', block: 'start' });
                    }
                    
                    showSuccessToast(maxSelect);
                }, 300);
            }
            
        } catch (error) {
            console.error('Error:', error);
            alert('Error loading crops. Please try again.');
        } finally {
            showLoadingState(false);
        }
    }
    
    function showLoadingState(show, message = 'Loading...') {
        let loader = document.getElementById('aiLoader');
        
        if (show) {
            if (!loader) {
                loader = document.createElement('div');
                loader.id = 'aiLoader';
                loader.style.cssText = `
                    position: fixed; top: 0; left: 0; width: 100%; height: 100%;
                    background: rgba(255,255,255,0.98); display: flex; flex-direction: column;
                    align-items: center; justify-content: center; z-index: 9999;
                `;
                loader.innerHTML = `
                    <div style="width: 50px; height: 50px; border: 4px solid #e8f5e9; border-top: 4px solid #4a7c2c; border-radius: 50%; animation: spin 1s linear infinite; margin-bottom: 20px;"></div>
                    <h3 style="color: #2d5016; margin: 0 0 10px 0; font-weight: 500;">${message}</h3>
                    <p style="color: #666; font-size: 0.9rem;">Please wait...</p>
                    <style>@keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }</style>
                `;
                document.body.appendChild(loader);
            }
        } else {
            if (loader) loader.remove();
        }
    }
    
    function showSuccessToast(count) {
        const toast = document.createElement('div');
        toast.style.cssText = 'position: fixed; bottom: 20px; right: 20px; background: #2d5016; color: white; padding: 14px 24px; border-radius: 6px; z-index: 10000; box-shadow: 0 4px 12px rgba(0,0,0,0.15); font-size: 0.9rem;';
        toast.textContent = `Top ${count} best crops selected for comparison`;
        document.body.appendChild(toast);
        setTimeout(() => toast.remove(), 3500);
    }
    </script>
    <script defer src="js/marketplace.js"></script>
    
    </div><!-- End #app wrapper -->
    
    <script>
        // Show page when fully loaded
        window.addEventListener('load', function() {
            document.body.classList.add('ready');
        });
    </script>
</body>
</html>
